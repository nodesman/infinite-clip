<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bullet Canvas Demo</title>
    <style>
      :root {
        --canvas-bg: #1f1f1f;
        --text-fg: #e6e6e6;
        --bullet-fill: #9a9a9a;         /* brighter grey fill */
        --bullet-border-hover: #6f6f6f; /* darker border on hover */
        --bullet-size: 8px;             /* adjust to match target */
        --bullet-ring: 3px;             /* hover ring thickness */
        --guide-color: #4a4a4a;         /* indent connector color */
        --guide-width: 2px;             /* indent connector thickness */
        --menu-size: 22px;              /* action chip size */
        --menu-gap: 8px;                /* space between menu and bullet */
        --glyph-gap: 8px;               /* space after bullet before text */
        --menu-bg: #3a3a3a;
        --menu-fg: #d7d7d7;
        --indent-step: 28px;            /* per-depth indent (generous) */
        --root-left-pad: 44px;          /* base left padding for root rows */
      }
      html, body { height: 100%; margin: 0; }
      body { background: var(--canvas-bg); color: var(--text-fg); font: 14px/1.7 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
      .canvas { max-width: 800px; margin: 24px auto; padding: 16px; }
      .row { display: flex; align-items: center; padding: 12px 10px; border-radius: 6px; position: relative; }
      .row:hover { background: rgba(255,255,255,0.03); }
      /* Indent guides overlay */
      .guides { position: absolute; left: 0; top: 0; bottom: 0; pointer-events: none; }
      .guide-line { position: absolute; top: 0; bottom: 0; width: var(--guide-width); background: var(--guide-color); opacity: 0.8; }
      .guide-elbow { position: absolute; height: var(--guide-width); background: var(--guide-color); opacity: 0.9; }
      .glyph { width: var(--bullet-size); height: var(--bullet-size); border-radius: 50%; background: var(--bullet-fill); margin: 0 var(--glyph-gap) 0 0; flex: 0 0 auto; box-sizing: content-box; box-shadow: none; }
      .row:hover .glyph { box-shadow: 0 0 0 var(--bullet-ring) var(--bullet-border-hover); }
      .text { flex: 1 1 auto; min-height: 24px; line-height: 1.7; outline: none; }
      .menu { width: var(--menu-size); height: var(--menu-size); border-radius: 50%; background: transparent; color: var(--menu-fg); display: inline-flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0; margin-right: var(--menu-gap); opacity: 0; transition: opacity 120ms ease, background-color 120ms ease; cursor: pointer; }
      .menu .dot { width: 3px; height: 3px; border-radius: 50%; background: var(--menu-fg); display: inline-block; margin: 0 1px; }
      .row:hover .menu, .row.focused .menu { opacity: 1; background: transparent; }
      .menu:hover { background: var(--menu-bg); }
      .indent { height: 0; flex: 0 0 auto; }
    </style>
  </head>
  <body>
    <div class="canvas">
      <h3>Bullet Canvas Demo (JS engine, C++ parity by tests)</h3>
      <div id="app"></div>
      <p style="opacity:.7; font-size:12px; margin-top:16px">Keys: Enter, Tab, Shift+Tab, Cmd/Ctrl+Shift+Up/Down, Backspace, Delete, Up/Down. Paste multiple lines to create bullets.</p>
    </div>
    <script src="./demo.js"></script>
  </body>
  </html>
